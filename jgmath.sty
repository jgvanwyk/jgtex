\RequirePackage{mathtools}
\RequirePackage[cal=boondox]{mathalpha}
\RequirePackage{tikz-cd}
\RequirePackage{mathdots}

\tikzcdset{arrow style = math font}

\newcommand{\iso}{\approx}
\newcommand{\comp}{\circ}
\newcommand{\cntsum}{\#}
\newcommand{\dsum}{\oplus}
\newcommand{\dprod}{\times}
\newcommand{\tprod}{\otimes}
\newcommand{\kprod}{\otimes}
\newcommand{\bigdprod}{\prod}
\newcommand{\bigdsum}{\bigoplus}
\newcommand{\bigtprod}{\bigotimes}
\newcommand{\inclus}{\hookrightarrow}
\newcommand{\Lie}{\mathcal{L}}
\newcommand{\Sec}{\Gamma}
\newcommand{\conn}{\nabla}
\newcommand{\lapl}{\Delta}
\newcommand{\hstar}{\ast}
\DeclareMathOperator{\divg}{div}
\newcommand{\hook}{\mathbin{\lrcorner}}
\newcommand{\del}{\partial}
\newcommand{\delbar}{\bar{\del}}
\newcommand{\mubar}{\bar{\mu}}
\newcommand{\DForm}{\Omega}
\newcommand{\vol}{\mathrm{vol}}
\newcommand{\BLOP}{\mathcal{B}}

\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\dist}{dist}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator*{\Res}{Res}
\DeclareMathOperator{\Mat}{Mat}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Sp}{Sp}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\Spin}{Spin}
\DeclareMathOperator{\Ext}{Ext}
\newcommand{\ExtP}{\Lambda}
\newcommand{\SymP}{S}
\DeclareMathOperator{\ch}{ch}
\DeclareMathOperator{\rk}{rk}
\DeclareMathOperator{\Prin}{Prin}

\let\numset\vvmathbb
\newcommand{\RR}{\numset{R}}
\newcommand{\CC}{\numset{C}}
\newcommand{\HH}{\numset{H}}
\newcommand{\OO}{\numset{O}}
\newcommand{\QQ}{\numset{Q}}
\newcommand{\NN}{\numset{N}}
\newcommand{\KK}{\numset{K}}
\newcommand{\ZZ}{\numset{Z}}
\newcommand{\FF}{\numset{F}}
\newcommand{\CP}{\numset{C}\mathrm{P}}
\newcommand{\RP}{\numset{R}\mathrm{P}}

\providecommand{\st}{}
\DeclarePairedDelimiterX{\set}[1]{\{}{\}}{%
    \renewcommand{\st}{\mathopen{}\,\delimsize\vert\,\mathopen{}}%
    #1}
\DeclarePairedDelimiterX{\grp}[1]{\langle}{\rangle}{%
    \renewcommand{\st}{\mathopen{}\,\delimsize\vert\,\mathopen{}}%
    #1}

\DeclarePairedDelimiter{\paren}{(}{)}
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\cmod}{\lvert}{\rvert}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\innprod}{\langle}{\rangle}

\newcommand{\utilde}[1]{\underaccent{\tilde}{#1}}

\newcommand{\mat}[1]{\begin{matrix}#1\end{matrix}}
\newcommand{\pmat}[1]{\begin{pmatrix}#1\end{pmatrix}}
\newcommand{\bmat}[1]{\begin{bmatrix}#1\end{bmatrix}}
\newcommand{\Bmat}[1]{\begin{Bmatrix}#1\end{Bmatrix}}
\newcommand{\vmat}[1]{\begin{vmatrix}#1\end{vmatrix}}
\newcommand{\Vmat}[1]{\begin{Vmatrix}#1\end{Vmatrix}}

% Math -- Derivatives
\NewDocumentCommand{\dv}{smo}{\IfBooleanTF{#1}%
    {\frac{d\IfValueT{#3}{#3}}{d#2}}%
    {d\IfValueT{#3}{#3}/d#2}}

\NewDocumentCommand{\mdv}{smmo}{\IfBooleanTF{#1}%
    {\frac{d^{#3}\IfValueT{#4}{#4}}{d#2^{#3}}}%
    {d^{#3}\IfValueT{#4}{#4}/d#1^{#3}}}

\NewDocumentCommand{\pdv}{smo}{\IfBooleanTF{#1}%
    {\frac{\partial\IfValueT{#3}{#3}}{\partial #2}}%
    {\partial\IfValueT{#3}{#3}/\partial #2}}

\NewDocumentCommand{\@PdvParseVariable}{>{\SplitList{,}}m}{\ProcessList{#1}{\@PdvParseExponent}}
\NewDocumentCommand{\@PdvParseExponent}{m}{\partial #1}

\NewDocumentCommand{\mpdv}{s>{\SplitList{,}}mmo}{\IfBooleanTF{#1}%
    {\frac%
        {\partial^{#3}\IfValueT{#4}{#4}}
        {\ProcessList{#2}{\@PdvParseVariable}}}%
    {\partial^{#3}\IfValueT{#4}{#4}/\ProcessList{#2}{\@PdvParseVariable}}}

\newcommand{\omitted}[1]{\widehat{#1}}

\NewDocumentCommand{\evalat}{smm}{\IfBooleanTF{#1}%
    {\mathopen{}%
        \kern-\nulldelimiterspace%
        \left.%
        #2%
        \right\rvert_{#3}%
        \mathclose{}}%
    {#2\rvert_{#3}}}

\let\restto\evalat

\newcommand{\blank}{}
